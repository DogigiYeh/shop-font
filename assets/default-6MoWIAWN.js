import{p as E,G as z,s as V,c as g,a0 as D,w as B,o as q,b as O,j as G,q as F,E as J,u as Z,H as K,y as P,J as X,L as i,M as A,d as Q,a1 as ee,f as te,a2 as ae,k as oe,l as le,n as ne,a3 as se,x as re,B as ie,a4 as ue,a5 as ce,a6 as de,a7 as ve,a8 as me,a9 as ge,aa as fe,ab as he,ac as j,R as be,S as ye,ad as Se,ae as we,U as pe,W as C,X as h,O as _,Y as p,af as L,ag as Ve,ah as ke,_ as U,Z as W,$ as T,ai as I,aj as H,ak as N,al as xe,am as Be,an as Ce}from"./index-BN4Bwt2g.js";import{g as R,S as _e}from"./ScrollTrigger-CsJC6r7g.js";import{m as Le,V as $}from"./VToolbar-70YQLQab.js";import{u as Pe,V as Te}from"./VList-DBdk4j7n.js";import{V as Ie}from"./VMain-B5XUviDc.js";import{V as He}from"./VContainer-CAJ1ACMF.js";import{V as Ne}from"./VMenu-DOQHP9qr.js";import{V as Re}from"./VListItem-BWUkREEo.js";import"./VDivider-DNI5o86V.js";const Ae=E({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ee(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=s;let b=0,v=0;const t=z(null),m=V(0),c=V(0),y=V(0),d=V(!1),a=V(!1),u=g(()=>Number(e.scrollThreshold)),n=g(()=>D((u.value-m.value)/u.value||0)),S=()=>{const r=t.value;if(!r||o&&!o.value)return;b=m.value,m.value="window"in r?r.pageYOffset:r.scrollTop;const f=r instanceof Window?document.documentElement.scrollHeight:r.scrollHeight;if(v!==f){v=f;return}a.value=m.value<b,y.value=Math.abs(m.value-u.value)};return B(a,()=>{c.value=c.value||m.value}),B(d,()=>{c.value=0}),q(()=>{B(()=>e.scrollTarget,r=>{var w;const f=r?document.querySelector(r):window;f&&f!==t.value&&((w=t.value)==null||w.removeEventListener("scroll",S),t.value=f,t.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),O(()=>{var r;(r=t.value)==null||r.removeEventListener("scroll",S)}),o&&B(o,S,{immediate:!0}),{scrollThreshold:u,currentScroll:m,currentThreshold:y,isScrollActive:d,scrollRatio:n,isScrollingUp:a,savedScroll:c}}const Ye=E({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Le(),...G(),...Ae(),height:{type:[Number,String],default:64}},"VAppBar"),Me=F()({name:"VAppBar",props:Ye(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:o}=s;const b=z(),v=J(e,"modelValue"),t=g(()=>{var k;const l=new Set(((k=e.scrollBehavior)==null?void 0:k.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),m=g(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!v.value}),{currentScroll:c,scrollThreshold:y,isScrollingUp:d,scrollRatio:a}=Ee(e,{canScroll:m}),u=g(()=>t.value.hide||t.value.fullyHide),n=g(()=>e.collapse||t.value.collapse&&(t.value.inverted?a.value>0:a.value===0)),S=g(()=>e.flat||t.value.fullyHide&&!v.value||t.value.elevate&&(t.value.inverted?c.value>0:c.value===0)),r=g(()=>t.value.fadeImage?t.value.inverted?1-a.value:a.value:void 0),f=g(()=>{var Y,M;if(t.value.hide&&t.value.inverted)return 0;const l=((Y=b.value)==null?void 0:Y.contentHeight)??0,k=((M=b.value)==null?void 0:M.extensionHeight)??0;return u.value?c.value<y.value||t.value.fullyHide?l+k:l:l+k});Z(g(()=>!!e.scrollBehavior),()=>{Q(()=>{u.value?t.value.inverted?v.value=c.value>y.value:v.value=d.value||c.value<y.value:v.value=!0})});const{ssrBootStyles:w}=Pe(),{layoutItemStyles:x}=K({id:e.name,order:g(()=>parseInt(e.order,10)),position:P(e,"location"),layoutSize:f,elementSize:V(void 0),active:v,absolute:P(e,"absolute")});return X(()=>{const l=$.filterProps(e);return i($,A({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...x.value,"--v-toolbar-image-opacity":r.value,height:void 0,...w.value},e.style]},l,{collapse:n.value,flat:S.value}),o)}),{}}}),Ue=E({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ee,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...te(),...ae({location:"top end"}),...oe(),...le(),...ne(),...se({transition:"scale-rotate-transition"})},"VBadge"),We=F()({name:"VBadge",inheritAttrs:!1,props:Ue(),setup(e,s){const{backgroundColorClasses:o,backgroundColorStyles:b}=re(P(e,"color")),{roundedClasses:v}=ie(e),{t}=ue(),{textColorClasses:m,textColorStyles:c}=ce(P(e,"textColor")),{themeClasses:y}=de(),{locationStyles:d}=ve(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?+(e.offsetY??0):["left","right"].includes(a)?+(e.offsetX??0):0));return X(()=>{const a=Number(e.content),u=!e.max||isNaN(a)?e.content:a<=+e.max?a:`${e.max}+`,[n,S]=me(s.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return i(e.tag,A({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},S,{style:e.style}),{default:()=>{var r,f;return[i("div",{class:"v-badge__wrapper"},[(f=(r=s.slots).default)==null?void 0:f.call(r),i(ge,{transition:e.transition},{default:()=>{var w,x;return[fe(i("span",A({class:["v-badge__badge",y.value,o.value,v.value,m.value],style:[b.value,c.value,e.inline?{}:d.value],"aria-atomic":"true","aria-label":t(e.label,a),"aria-live":"polite",role:"status"},n),[e.dot?void 0:s.slots.badge?(x=(w=s.slots).badge)==null?void 0:x.call(w):e.icon?i(j,{icon:e.icon},null):u]),[[he,e.modelValue]])]}})])]}})}),{}}}),$e=""+new URL("loge1-tP68qLeW.svg",import.meta.url).href,Ze={__name:"default",setup(e){R.registerPlugin(_e),q(()=>{let d=window.scrollY,a=!1;window.addEventListener("scroll",()=>{const u=window.scrollY;u<d?a||(a=!0,R.to("#navbar",{y:0,opacity:1,duration:.3,ease:"power2.out"})):a&&(a=!1,R.to("#navbar",{y:-100,opacity:0,duration:.3,ease:"power2.out"})),d=u})});const{t:s}=be(),o=ye(),{apiAuth:b}=Ce(),v=Se(),t=we(),m=g(()=>[{to:"/register",text:s("nav.register"),icon:"mdi-account-plus",show:!o.isLoggedIn},{to:"/login",text:s("nav.login"),icon:"mdi-account-arrow-left",show:!o.isLoggedIn},{to:"/",text:s("nav.home"),icon:"mdi-home",show:o.isLoggedIn},{to:"/about",text:s("nav.orders"),icon:"mdi-barley",show:o.isLoggedIn},{to:"/orders",text:s("nav.explore"),icon:" mdi-magnify-expand",show:o.isLoggedIn},{to:"/cart",text:s("nav.cart"),icon:"mdi-bookshelf",show:o.isLoggedIn},{to:"/admin",text:s("nav.admin"),icon:"mdi-cog",show:o.isLoggedIn&&o.isAdmin}]),c=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],y=async()=>{try{await b.delete("/user/logout")}catch(d){console.log(d)}o.logout(),v({text:s("logout.success"),snackbarProps:{color:"green"}}),t.push("/")};return(d,a)=>{const u=pe("router-view");return p(),C(_,null,[i(Me,{id:"navbar",style:{"background-color":"var(--v-theme-myWhiteColor1)",color:"var(--v-theme-)"}},{default:h(()=>[i(He,{class:"d-flex align-center"},{default:h(()=>[i(L,{to:"/",active:!1},{default:h(()=>a[0]||(a[0]=[Ve("img",{src:$e,alt:""},null,-1)])),_:1}),i(ke),(p(!0),C(_,null,U(m.value,n=>(p(),C(_,{key:n.to},[n.show?(p(),T(L,{key:0,to:n.to,"prepend-icon":n.icon},{default:h(()=>[I(H(n.text)+" ",1),n.to==="/cart"?(p(),T(We,{key:0,content:W(o).cart,floating:"",color:"red"},null,8,["content"])):N("",!0)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),W(o).isLoggedIn?(p(),T(L,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:y},{default:h(()=>[I(H(d.$t("nav.logout")),1)]),_:1})):N("",!0),i(Ne,null,{activator:h(({props:n})=>[i(L,xe(Be(n)),{default:h(()=>[i(j,{icon:"mdi-translate"})]),_:2},1040)]),default:h(()=>[i(Te,null,{default:h(()=>[(p(),C(_,null,U(c,n=>i(Re,{key:n.value,onClick:S=>d.$i18n.locale=n.value},{default:h(()=>[I(H(n.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),i(Ie,null,{default:h(()=>[i(u)]),_:1})],64)}}};export{Ze as default};
