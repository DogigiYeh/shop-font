import{p as E,G as j,s as V,c as g,a0 as X,w as B,o as z,b as D,j as O,q,E as G,u as J,H as Z,y as P,J as F,L as i,M as A,d as K,a1 as Q,f as ee,a2 as te,k as ae,l as oe,n as le,a3 as ne,x as se,B as re,a4 as ie,a5 as ue,a6 as ce,a7 as de,a8 as ve,a9 as me,aa as ge,ab as fe,ac as he,R as be,S as ye,ad as Se,ae as we,U as pe,W as C,X as y,O as L,Y as p,af as _,ag as Ve,ah as ke,_ as U,Z as W,$ as T,ai as I,aj as H,ak as N,al as xe,am as Be,an as Ce}from"./index-DoTAM53F.js";import{g as R,S as Le}from"./ScrollTrigger-CsJC6r7g.js";import{m as _e,V as $}from"./VToolbar-y5ZQ-C28.js";import{u as Pe,V as Te}from"./VList-Bl9w983E.js";import{V as Ie}from"./VMain-msUS5FfR.js";import{V as He}from"./VContainer-DSrIv1AE.js";import{V as Ne}from"./VMenu-DqAoL3Vh.js";import{V as Re}from"./VListItem-BubJAX6y.js";import"./VDivider-CJTIQWI9.js";const Ae=E({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ee(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=s;let h=0,v=0;const t=j(null),m=V(0),c=V(0),b=V(0),d=V(!1),a=V(!1),u=g(()=>Number(e.scrollThreshold)),n=g(()=>X((u.value-m.value)/u.value||0)),S=()=>{const r=t.value;if(!r||o&&!o.value)return;h=m.value,m.value="window"in r?r.pageYOffset:r.scrollTop;const f=r instanceof Window?document.documentElement.scrollHeight:r.scrollHeight;if(v!==f){v=f;return}a.value=m.value<h,b.value=Math.abs(m.value-u.value)};return B(a,()=>{c.value=c.value||m.value}),B(d,()=>{c.value=0}),z(()=>{B(()=>e.scrollTarget,r=>{var w;const f=r?document.querySelector(r):window;f&&f!==t.value&&((w=t.value)==null||w.removeEventListener("scroll",S),t.value=f,t.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),D(()=>{var r;(r=t.value)==null||r.removeEventListener("scroll",S)}),o&&B(o,S,{immediate:!0}),{scrollThreshold:u,currentScroll:m,currentThreshold:b,isScrollActive:d,scrollRatio:n,isScrollingUp:a,savedScroll:c}}const Ye=E({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},..._e(),...O(),...Ae(),height:{type:[Number,String],default:64}},"VAppBar"),Me=q()({name:"VAppBar",props:Ye(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:o}=s;const h=j(),v=G(e,"modelValue"),t=g(()=>{var k;const l=new Set(((k=e.scrollBehavior)==null?void 0:k.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),m=g(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!v.value}),{currentScroll:c,scrollThreshold:b,isScrollingUp:d,scrollRatio:a}=Ee(e,{canScroll:m}),u=g(()=>t.value.hide||t.value.fullyHide),n=g(()=>e.collapse||t.value.collapse&&(t.value.inverted?a.value>0:a.value===0)),S=g(()=>e.flat||t.value.fullyHide&&!v.value||t.value.elevate&&(t.value.inverted?c.value>0:c.value===0)),r=g(()=>t.value.fadeImage?t.value.inverted?1-a.value:a.value:void 0),f=g(()=>{var Y,M;if(t.value.hide&&t.value.inverted)return 0;const l=((Y=h.value)==null?void 0:Y.contentHeight)??0,k=((M=h.value)==null?void 0:M.extensionHeight)??0;return u.value?c.value<b.value||t.value.fullyHide?l+k:l:l+k});J(g(()=>!!e.scrollBehavior),()=>{K(()=>{u.value?t.value.inverted?v.value=c.value>b.value:v.value=d.value||c.value<b.value:v.value=!0})});const{ssrBootStyles:w}=Pe(),{layoutItemStyles:x}=Z({id:e.name,order:g(()=>parseInt(e.order,10)),position:P(e,"location"),layoutSize:f,elementSize:V(void 0),active:v,absolute:P(e,"absolute")});return F(()=>{const l=$.filterProps(e);return i($,A({ref:h,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...x.value,"--v-toolbar-image-opacity":r.value,height:void 0,...w.value},e.style]},l,{collapse:n.value,flat:S.value}),o)}),{}}}),Ue=E({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Q,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ee(),...te({location:"top end"}),...ae(),...oe(),...le(),...ne({transition:"scale-rotate-transition"})},"VBadge"),We=q()({name:"VBadge",inheritAttrs:!1,props:Ue(),setup(e,s){const{backgroundColorClasses:o,backgroundColorStyles:h}=se(P(e,"color")),{roundedClasses:v}=re(e),{t}=ie(),{textColorClasses:m,textColorStyles:c}=ue(P(e,"textColor")),{themeClasses:b}=ce(),{locationStyles:d}=de(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?+(e.offsetY??0):["left","right"].includes(a)?+(e.offsetX??0):0));return F(()=>{const a=Number(e.content),u=!e.max||isNaN(a)?e.content:a<=+e.max?a:`${e.max}+`,[n,S]=ve(s.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return i(e.tag,A({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},S,{style:e.style}),{default:()=>{var r,f;return[i("div",{class:"v-badge__wrapper"},[(f=(r=s.slots).default)==null?void 0:f.call(r),i(me,{transition:e.transition},{default:()=>{var w,x;return[ge(i("span",A({class:["v-badge__badge",b.value,o.value,v.value,m.value],style:[h.value,c.value,e.inline?{}:d.value],"aria-atomic":"true","aria-label":t(e.label,a),"aria-live":"polite",role:"status"},n),[e.dot?void 0:s.slots.badge?(x=(w=s.slots).badge)==null?void 0:x.call(w):e.icon?i(he,{icon:e.icon},null):u]),[[fe,e.modelValue]])]}})])]}})}),{}}}),$e=""+new URL("loge1-tP68qLeW.svg",import.meta.url).href,Ze={__name:"default",setup(e){R.registerPlugin(Le),z(()=>{let d=window.scrollY,a=!1;window.addEventListener("scroll",()=>{const u=window.scrollY;u<d?a||(a=!0,R.to("#navbar",{y:0,opacity:1,duration:.3,ease:"power2.out"})):a&&(a=!1,R.to("#navbar",{y:-100,opacity:0,duration:.3,ease:"power2.out"})),d=u})});const{t:s}=be(),o=ye(),{apiAuth:h}=Ce(),v=Se(),t=we(),m=g(()=>[{to:"/register",text:s("nav.register"),icon:"mdi-account-plus",show:!o.isLoggedIn},{to:"/login",text:s("nav.login"),icon:"mdi-account-arrow-left",show:!o.isLoggedIn},{to:"/",text:s("nav.home"),icon:"mdi-home",show:o.isLoggedIn},{to:"/about",text:s("nav.orders"),icon:"mdi-barley",show:o.isLoggedIn},{to:"/explore",text:s("nav.explore"),icon:" mdi-magnify-expand",show:o.isLoggedIn},{to:"/journal",text:s("nav.journal"),icon:"mdi-bookshelf",show:o.isLoggedIn},{to:"/admin",text:s("nav.admin"),icon:"mdi-cog",show:o.isLoggedIn&&o.isAdmin}]),c=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],b=async()=>{try{await h.delete("/user/logout")}catch(d){console.log(d)}o.logout(),v({text:s("logout.success"),snackbarProps:{color:"green"}}),t.push("/")};return(d,a)=>{const u=pe("router-view");return p(),C(L,null,[i(Me,{id:"navbar",style:{"background-color":"var(--v-theme-myWhiteColor1)",color:"var(--v-theme-)"}},{default:y(()=>[i(He,{class:"d-flex align-center"},{default:y(()=>[i(_,{to:"/",active:!1},{default:y(()=>a[0]||(a[0]=[Ve("img",{src:$e,alt:""},null,-1)])),_:1}),i(ke),(p(!0),C(L,null,U(m.value,n=>(p(),C(L,{key:n.to},[n.show?(p(),T(_,{key:0,to:n.to,"prepend-icon":n.icon},{default:y(()=>[I(H(n.text)+" ",1),n.to==="/cart"?(p(),T(We,{key:0,content:W(o).cart,floating:"",color:"red"},null,8,["content"])):N("",!0)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),W(o).isLoggedIn?(p(),T(_,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:b},{default:y(()=>[I(H(d.$t("nav.logout")),1)]),_:1})):N("",!0),i(Ne,null,{activator:y(({props:n})=>[i(_,xe(Be(n)),null,16)]),default:y(()=>[i(Te,null,{default:y(()=>[(p(),C(L,null,U(c,n=>i(Re,{key:n.value,onClick:S=>d.$i18n.locale=n.value},{default:y(()=>[I(H(n.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),i(Ie,null,{default:y(()=>[i(u)]),_:1})],64)}}};export{Ze as default};
