import{aw as h,R,ad as $,ae as q,S as M,Y as B,W as D,au as a,ai as i,aa as d,aR as m,Z as e,aD as I,am as P}from"./index-BJ2HPGnx.js";import{c as U,a as g,u as V,e as _}from"./index.esm-CyyLiRh2.js";import{b}from"./route-block-B_A1xBdJ.js";const A={class:"login-container"},E={for:"login-input-user",class:"login__label"},F={class:"error-message"},N={for:"login-input-password",class:"login__label"},G={class:"error-message"},L=["disabled"],v={__name:"login",setup(O){const{t:r}=R(),{api:f}=P(),c=$(),w=q(),S=M(),k=U({account:g().required(r("api.userAccountRequired")).min(4).max(20),password:g().required(r("api.userPasswordRequired")).min(4).max(20)}),{handleSubmit:x,isSubmitting:y}=V({validationSchema:k}),l=_("account"),u=_("password"),p=x(async t=>{var s,o;try{const{data:n}=await f.post("/user/login",{account:t.account,password:t.password});S.login(n.result),c({text:r("login.success"),snackbarProps:{color:"green"}}),w.push("/")}catch(n){c({text:r("api."+(((o=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:o.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(t,s)=>(B(),D("div",A,[a("form",{class:"form-login",onSubmit:s[2]||(s[2]=I((...o)=>e(p)&&e(p)(...o),["prevent"]))},[s[3]||(s[3]=a("ul",{class:"login-nav"},[a("li",{class:"login-nav__item active"}," LOGIN:) ")],-1)),a("label",E,i(t.$t("user.account")),1),d(a("input",{id:"login-input-user","onUpdate:modelValue":s[0]||(s[0]=o=>e(l).value.value=o),class:"login__input",type:"text"},null,512),[[m,e(l).value.value]]),a("span",F,i(e(l).errorMessage.value),1),a("label",N,i(t.$t("user.password")),1),d(a("input",{id:"login-input-password","onUpdate:modelValue":s[1]||(s[1]=o=>e(u).value.value=o),class:"login__input",type:"password"},null,512),[[m,e(u).value.value]]),a("span",G,i(e(u).errorMessage.value),1),a("button",{class:"login__submit",disabled:e(y),type:"submit"},i(t.$t("login.submit")),9,L)],32)]))}};typeof b=="function"&&b(v);const Z=h(v,[["__scopeId","data-v-242c7ed8"]]);export{Z as default};
