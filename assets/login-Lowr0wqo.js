import{aC as h,R as $,ad as q,ae as M,S as R,Y as B,W as I,ag as a,aj as r,aa as d,aX as m,Z as e,aJ as P,an as U}from"./index-B456UOXX.js";import{c as V,a as g,u as A,e as _}from"./index.esm-BrHK9G6o.js";import{b}from"./route-block-B_A1xBdJ.js";const D={class:"login-container"},E={for:"login-input-user",class:"login__label"},F={class:"error-message"},N={for:"login-input-password",class:"login__label"},j={class:"error-message"},C=["disabled"],v={__name:"login",setup(G){const{t:i}=$(),{api:f}=U(),c=q(),w=M(),S=R(),k=V({account:g().required(i("api.userAccountRequired")).min(4).max(20),password:g().required(i("api.userPasswordRequired")).min(4).max(20)}),{handleSubmit:x,isSubmitting:y}=A({validationSchema:k}),l=_("account"),u=_("password"),p=x(async t=>{var s,o;try{const{data:n}=await f.post("/user/login",{account:t.account,password:t.password});S.login(n.result),c({text:i("login.success"),snackbarProps:{color:"green"}}),w.push("/")}catch(n){c({text:i("api."+(((o=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:o.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(t,s)=>(B(),I("div",D,[a("form",{class:"form-login",onSubmit:s[2]||(s[2]=P((...o)=>e(p)&&e(p)(...o),["prevent"]))},[s[3]||(s[3]=a("ul",{class:"login-nav"},[a("li",{class:"login-nav__item active"}," LOGIN:) ")],-1)),a("label",E,r(t.$t("user.account")),1),d(a("input",{id:"login-input-user","onUpdate:modelValue":s[0]||(s[0]=o=>e(l).value.value=o),class:"login__input",type:"text"},null,512),[[m,e(l).value.value]]),a("span",F,r(e(l).errorMessage.value),1),a("label",N,r(t.$t("user.password")),1),d(a("input",{id:"login-input-password","onUpdate:modelValue":s[1]||(s[1]=o=>e(u).value.value=o),class:"login__input",type:"password"},null,512),[[m,e(u).value.value]]),a("span",j,r(e(u).errorMessage.value),1),a("button",{class:"login__submit",disabled:e(y),type:"submit"},r(t.$t("login.submit")),9,C)],32)]))}};typeof b=="function"&&b(v);const T=h(v,[["__scopeId","data-v-242c7ed8"]]);export{T as default};
