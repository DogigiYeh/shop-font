import{aw as h,R as $,ad as I,ae as R,S as q,Y as B,W as M,au as a,ai as r,aa as d,aN as m,Z as e,aS as U,ax as F,am as L}from"./index-OoHjb37c.js";import{c as N,a as g,u as P,e as _}from"./index.esm-CRIeV4yV.js";import{b}from"./route-block-B_A1xBdJ.js";const V=""+new URL("12-CGL7Z8BF.jpg",import.meta.url).href,A={for:"login-input-user",class:"login__label"},D={class:"error-message"},E={for:"login-input-password",class:"login__label"},G={class:"error-message"},Z=["disabled"],v={__name:"login",setup(j){const{t:i}=$(),{api:f}=L(),c=I(),w=R(),S=q(),k=N({account:g().required(i("api.userAccountRequired")).min(4).max(20),password:g().required(i("api.userPasswordRequired")).min(4).max(20)}),{handleSubmit:y,isSubmitting:x}=P({validationSchema:k}),l=_("account"),u=_("password"),p=y(async t=>{var s,o;try{const{data:n}=await f.post("/user/login",{account:t.account,password:t.password});S.login(n.result),c({text:i("login.success"),snackbarProps:{color:"green"}}),w.push("/")}catch(n){c({text:i("api."+(((o=(s=n==null?void 0:n.response)==null?void 0:s.data)==null?void 0:o.message)||"unknownError")),snackbarProps:{color:"red"}})}});return(t,s)=>(B(),M("div",{class:"login-container",style:F({backgroundImage:`url(${e(V)})`})},[a("form",{class:"form-login",onSubmit:s[2]||(s[2]=U((...o)=>e(p)&&e(p)(...o),["prevent"]))},[s[3]||(s[3]=a("ul",{class:"login-nav"},[a("li",{class:"login-nav__item active"}," LOGIN:) ")],-1)),a("label",A,r(t.$t("user.account")),1),d(a("input",{id:"login-input-user","onUpdate:modelValue":s[0]||(s[0]=o=>e(l).value.value=o),class:"login__input",type:"text"},null,512),[[m,e(l).value.value]]),a("span",D,r(e(l).errorMessage.value),1),a("label",E,r(t.$t("user.password")),1),d(a("input",{id:"login-input-password","onUpdate:modelValue":s[1]||(s[1]=o=>e(u).value.value=o),class:"login__input",type:"password"},null,512),[[m,e(u).value.value]]),a("span",G,r(e(u).errorMessage.value),1),a("button",{class:"login__submit",disabled:e(x),type:"submit"},r(t.$t("login.submit")),9,Z)],32)],4))}};typeof b=="function"&&b(v);const T=h(v,[["__scopeId","data-v-4e5c5a5a"]]);export{T as default};
