import{p as E,G as z,s as V,c as m,a0 as q,w as B,o as D,b as O,j as G,q as F,E as J,u as Z,H as K,y as I,J as X,L as i,M as A,d as Q,a1 as ee,f as te,a2 as ae,k as oe,l as le,n as ne,a3 as se,x as re,B as ie,a4 as ue,a5 as ce,a6 as de,a7 as ve,a8 as ge,a9 as me,aa as fe,ab as he,ac as j,R as be,S as ye,ad as Se,ae as we,U as ke,W as C,X as h,O as _,Y as k,af as L,ag as T,ah as Ve,_ as U,Z as $,$ as P,ai as H,aj as N,ak as pe,al as xe,am as Be}from"./index-CxpTp-dh.js";import{g as R,S as Ce}from"./ScrollTrigger-CsJC6r7g.js";import{m as _e,V as W}from"./VToolbar-CnZyuYi2.js";import{u as Le,V as Te,a as Ie}from"./VList-k-U-Rryh.js";import{V as Pe}from"./VMain-B-47WRd1.js";import{V as He}from"./VContainer-BlQjyrVb.js";import{V as Ne}from"./VMenu-BRJ0_rOB.js";import"./VDivider-DSgDSAKq.js";const Re=E({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ae(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=s;let b=0,v=0;const t=z(null),g=V(0),c=V(0),y=V(0),d=V(!1),a=V(!1),u=m(()=>Number(e.scrollThreshold)),n=m(()=>q((u.value-g.value)/u.value||0)),S=()=>{const r=t.value;if(!r||o&&!o.value)return;b=g.value,g.value="window"in r?r.pageYOffset:r.scrollTop;const f=r instanceof Window?document.documentElement.scrollHeight:r.scrollHeight;if(v!==f){v=f;return}a.value=g.value<b,y.value=Math.abs(g.value-u.value)};return B(a,()=>{c.value=c.value||g.value}),B(d,()=>{c.value=0}),D(()=>{B(()=>e.scrollTarget,r=>{var w;const f=r?document.querySelector(r):window;f&&f!==t.value&&((w=t.value)==null||w.removeEventListener("scroll",S),t.value=f,t.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),O(()=>{var r;(r=t.value)==null||r.removeEventListener("scroll",S)}),o&&B(o,S,{immediate:!0}),{scrollThreshold:u,currentScroll:g,currentThreshold:y,isScrollActive:d,scrollRatio:n,isScrollingUp:a,savedScroll:c}}const Ee=E({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},..._e(),...G(),...Re(),height:{type:[Number,String],default:64}},"VAppBar"),Ye=F()({name:"VAppBar",props:Ee(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:o}=s;const b=z(),v=J(e,"modelValue"),t=m(()=>{var p;const l=new Set(((p=e.scrollBehavior)==null?void 0:p.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),g=m(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!v.value}),{currentScroll:c,scrollThreshold:y,isScrollingUp:d,scrollRatio:a}=Ae(e,{canScroll:g}),u=m(()=>t.value.hide||t.value.fullyHide),n=m(()=>e.collapse||t.value.collapse&&(t.value.inverted?a.value>0:a.value===0)),S=m(()=>e.flat||t.value.fullyHide&&!v.value||t.value.elevate&&(t.value.inverted?c.value>0:c.value===0)),r=m(()=>t.value.fadeImage?t.value.inverted?1-a.value:a.value:void 0),f=m(()=>{var Y,M;if(t.value.hide&&t.value.inverted)return 0;const l=((Y=b.value)==null?void 0:Y.contentHeight)??0,p=((M=b.value)==null?void 0:M.extensionHeight)??0;return u.value?c.value<y.value||t.value.fullyHide?l+p:l:l+p});Z(m(()=>!!e.scrollBehavior),()=>{Q(()=>{u.value?t.value.inverted?v.value=c.value>y.value:v.value=d.value||c.value<y.value:v.value=!0})});const{ssrBootStyles:w}=Le(),{layoutItemStyles:x}=K({id:e.name,order:m(()=>parseInt(e.order,10)),position:I(e,"location"),layoutSize:f,elementSize:V(void 0),active:v,absolute:I(e,"absolute")});return X(()=>{const l=W.filterProps(e);return i(W,A({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...x.value,"--v-toolbar-image-opacity":r.value,height:void 0,...w.value},e.style]},l,{collapse:n.value,flat:S.value}),o)}),{}}}),Me=E({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ee,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...te(),...ae({location:"top end"}),...oe(),...le(),...ne(),...se({transition:"scale-rotate-transition"})},"VBadge"),Ue=F()({name:"VBadge",inheritAttrs:!1,props:Me(),setup(e,s){const{backgroundColorClasses:o,backgroundColorStyles:b}=re(I(e,"color")),{roundedClasses:v}=ie(e),{t}=ue(),{textColorClasses:g,textColorStyles:c}=ce(I(e,"textColor")),{themeClasses:y}=de(),{locationStyles:d}=ve(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?+(e.offsetY??0):["left","right"].includes(a)?+(e.offsetX??0):0));return X(()=>{const a=Number(e.content),u=!e.max||isNaN(a)?e.content:a<=+e.max?a:`${e.max}+`,[n,S]=ge(s.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return i(e.tag,A({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},S,{style:e.style}),{default:()=>{var r,f;return[i("div",{class:"v-badge__wrapper"},[(f=(r=s.slots).default)==null?void 0:f.call(r),i(me,{transition:e.transition},{default:()=>{var w,x;return[fe(i("span",A({class:["v-badge__badge",y.value,o.value,v.value,g.value],style:[b.value,c.value,e.inline?{}:d.value],"aria-atomic":"true","aria-label":t(e.label,a),"aria-live":"polite",role:"status"},n),[e.dot?void 0:s.slots.badge?(x=(w=s.slots).badge)==null?void 0:x.call(w):e.icon?i(j,{icon:e.icon},null):u]),[[he,e.modelValue]])]}})])]}})}),{}}}),Oe={__name:"default",setup(e){R.registerPlugin(Ce),D(()=>{let d=window.scrollY,a=!1;window.addEventListener("scroll",()=>{const u=window.scrollY;u<d?a||(a=!0,R.to("#navbar",{y:0,opacity:1,duration:.3,ease:"power2.out"})):a&&(a=!1,R.to("#navbar",{y:-100,opacity:0,duration:.3,ease:"power2.out"})),d=u})});const{t:s}=be(),o=ye(),{apiAuth:b}=Be(),v=Se(),t=we(),g=m(()=>[{to:"/register",text:s("nav.register"),icon:"mdi-account-plus",show:!o.isLoggedIn},{to:"/login",text:s("nav.login"),icon:"mdi-account-arrow-left",show:!o.isLoggedIn},{to:"/",text:s("nav.home"),icon:"mdi-home",show:o.isLoggedIn},{to:"/about",text:s("nav.orders"),icon:"mdi-barley",show:o.isLoggedIn},{to:"/orders",text:s("nav.explore"),icon:" mdi-magnify-expand",show:o.isLoggedIn},{to:"/cart",text:s("nav.cart"),icon:"mdi-bookshelf",show:o.isLoggedIn},{to:"/admin",text:s("nav.admin"),icon:"mdi-cog",show:o.isLoggedIn&&o.isAdmin}]),c=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],y=async()=>{try{await b.delete("/user/logout")}catch(d){console.log(d)}o.logout(),v({text:s("logout.success"),snackbarProps:{color:"green"}}),t.push("/")};return(d,a)=>{const u=ke("router-view");return k(),C(_,null,[i(Ye,{id:"navbar",style:{"background-color":"var(--v-theme-myWhiteColor1)",color:"var(--v-theme-)"}},{default:h(()=>[i(He,{class:"d-flex align-center"},{default:h(()=>[i(L,{to:"/",active:!1},{default:h(()=>a[0]||(a[0]=[T("Dendro")])),_:1}),i(Ve),(k(!0),C(_,null,U(g.value,n=>(k(),C(_,{key:n.to},[n.show?(k(),P(L,{key:0,to:n.to,"prepend-icon":n.icon},{default:h(()=>[T(H(n.text)+" ",1),n.to==="/cart"?(k(),P(Ue,{key:0,content:$(o).cart,floating:"",color:"red"},null,8,["content"])):N("",!0)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),$(o).isLoggedIn?(k(),P(L,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:y},{default:h(()=>[T(H(d.$t("nav.logout")),1)]),_:1})):N("",!0),i(Ne,null,{activator:h(({props:n})=>[i(L,pe(xe(n)),{default:h(()=>[i(j,{icon:"mdi-translate"})]),_:2},1040)]),default:h(()=>[i(Te,null,{default:h(()=>[(k(),C(_,null,U(c,n=>i(Ie,{key:n.value,onClick:S=>d.$i18n.locale=n.value},{default:h(()=>[T(H(n.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),i(Pe,null,{default:h(()=>[i(u)]),_:1})],64)}}};export{Oe as default};
