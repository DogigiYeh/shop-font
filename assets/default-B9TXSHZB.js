import{p as A,G as W,s as w,c as m,a0 as X,w as p,o as j,b as q,j as O,q as Y,E as G,u as J,H as Z,y as T,J as D,L as u,M as R,d as K,a1 as Q,f as ee,a2 as te,k as ae,l as oe,n as le,a3 as ne,x as se,B as re,a4 as ue,a5 as ie,a6 as ce,a7 as de,a8 as ve,a9 as me,aa as ge,ab as fe,ac as F,R as he,S as be,ad as ye,ae as Se,U as ke,W as C,X as h,O as _,Y as V,af as L,ag as I,ah as Ve,_ as $,Z as U,$ as P,ai as H,aj as N,ak as we,al as xe,am as Be}from"./index-5E7PECAo.js";import{m as pe,V as z}from"./VToolbar-DHarv9Am.js";import{u as Ce,V as _e,a as Le}from"./VList-CQ1XykGX.js";import{V as Ie}from"./VMain-CUaj9f0J.js";import{V as Te}from"./VContainer-k3G95Q1l.js";import{V as Pe}from"./VMenu-D44fiovM.js";import"./VDivider-DXDSSGZU.js";const He=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ne(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:a}=s;let b=0,c=0;const t=W(null),d=w(0),i=w(0),y=w(0),g=w(!1),o=w(!1),v=m(()=>Number(e.scrollThreshold)),n=m(()=>X((v.value-d.value)/v.value||0)),S=()=>{const r=t.value;if(!r||a&&!a.value)return;b=d.value,d.value="window"in r?r.pageYOffset:r.scrollTop;const f=r instanceof Window?document.documentElement.scrollHeight:r.scrollHeight;if(c!==f){c=f;return}o.value=d.value<b,y.value=Math.abs(d.value-v.value)};return p(o,()=>{i.value=i.value||d.value}),p(g,()=>{i.value=0}),j(()=>{p(()=>e.scrollTarget,r=>{var k;const f=r?document.querySelector(r):window;f&&f!==t.value&&((k=t.value)==null||k.removeEventListener("scroll",S),t.value=f,t.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),q(()=>{var r;(r=t.value)==null||r.removeEventListener("scroll",S)}),a&&p(a,S,{immediate:!0}),{scrollThreshold:v,currentScroll:d,currentThreshold:y,isScrollActive:g,scrollRatio:n,isScrollingUp:o,savedScroll:i}}const Re=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...pe(),...O(),...He(),height:{type:[Number,String],default:64}},"VAppBar"),Ae=Y()({name:"VAppBar",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:a}=s;const b=W(),c=G(e,"modelValue"),t=m(()=>{var x;const l=new Set(((x=e.scrollBehavior)==null?void 0:x.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),d=m(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!c.value}),{currentScroll:i,scrollThreshold:y,isScrollingUp:g,scrollRatio:o}=Ne(e,{canScroll:d}),v=m(()=>t.value.hide||t.value.fullyHide),n=m(()=>e.collapse||t.value.collapse&&(t.value.inverted?o.value>0:o.value===0)),S=m(()=>e.flat||t.value.fullyHide&&!c.value||t.value.elevate&&(t.value.inverted?i.value>0:i.value===0)),r=m(()=>t.value.fadeImage?t.value.inverted?1-o.value:o.value:void 0),f=m(()=>{var E,M;if(t.value.hide&&t.value.inverted)return 0;const l=((E=b.value)==null?void 0:E.contentHeight)??0,x=((M=b.value)==null?void 0:M.extensionHeight)??0;return v.value?i.value<y.value||t.value.fullyHide?l+x:l:l+x});J(m(()=>!!e.scrollBehavior),()=>{K(()=>{v.value?t.value.inverted?c.value=i.value>y.value:c.value=g.value||i.value<y.value:c.value=!0})});const{ssrBootStyles:k}=Ce(),{layoutItemStyles:B}=Z({id:e.name,order:m(()=>parseInt(e.order,10)),position:T(e,"location"),layoutSize:f,elementSize:w(void 0),active:c,absolute:T(e,"absolute")});return D(()=>{const l=z.filterProps(e);return u(z,R({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...B.value,"--v-toolbar-image-opacity":r.value,height:void 0,...k.value},e.style]},l,{collapse:n.value,flat:S.value}),a)}),{}}}),Ee=A({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Q,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ee(),...te({location:"top end"}),...ae(),...oe(),...le(),...ne({transition:"scale-rotate-transition"})},"VBadge"),Me=Y()({name:"VBadge",inheritAttrs:!1,props:Ee(),setup(e,s){const{backgroundColorClasses:a,backgroundColorStyles:b}=se(T(e,"color")),{roundedClasses:c}=re(e),{t}=ue(),{textColorClasses:d,textColorStyles:i}=ie(T(e,"textColor")),{themeClasses:y}=ce(),{locationStyles:g}=de(e,!0,o=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(o)?+(e.offsetY??0):["left","right"].includes(o)?+(e.offsetX??0):0));return D(()=>{const o=Number(e.content),v=!e.max||isNaN(o)?e.content:o<=+e.max?o:`${e.max}+`,[n,S]=ve(s.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return u(e.tag,R({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},S,{style:e.style}),{default:()=>{var r,f;return[u("div",{class:"v-badge__wrapper"},[(f=(r=s.slots).default)==null?void 0:f.call(r),u(me,{transition:e.transition},{default:()=>{var k,B;return[ge(u("span",R({class:["v-badge__badge",y.value,a.value,c.value,d.value],style:[b.value,i.value,e.inline?{}:g.value],"aria-atomic":"true","aria-label":t(e.label,o),"aria-live":"polite",role:"status"},n),[e.dot?void 0:s.slots.badge?(B=(k=s.slots).badge)==null?void 0:B.call(k):e.icon?u(F,{icon:e.icon},null):v]),[[fe,e.modelValue]])]}})])]}})}),{}}}),Xe={__name:"default",setup(e){const{t:s}=he(),a=be(),{apiAuth:b}=Be(),c=ye(),t=Se(),d=m(()=>[{to:"/register",text:s("nav.register"),icon:"mdi-account-plus",show:!a.isLoggedIn},{to:"/login",text:s("nav.login"),icon:"mdi-account-arrow-left",show:!a.isLoggedIn},{to:"/",text:s("nav.home"),icon:"mdi-home",show:a.isLoggedIn},{to:"/orders",text:s("nav.orders"),icon:"mdi-barley",show:a.isLoggedIn},{to:"/orders",text:s("nav.explore"),icon:" mdi-magnify-expand",show:a.isLoggedIn},{to:"/cart",text:s("nav.cart"),icon:"mdi-bookshelf",show:a.isLoggedIn},{to:"/admin",text:s("nav.admin"),icon:"mdi-cog",show:a.isLoggedIn&&a.isAdmin}]),i=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],y=async()=>{try{await b.delete("/user/logout")}catch(g){console.log(g)}a.logout(),c({text:s("logout.success"),snackbarProps:{color:"green"}}),t.push("/")};return(g,o)=>{const v=ke("router-view");return V(),C(_,null,[u(Ae,{style:{"background-color":"var(--v-theme-myWhiteColor1)",color:"var(--v-theme-)"}},{default:h(()=>[u(Te,{class:"d-flex align-center"},{default:h(()=>[u(L,{to:"/",active:!1},{default:h(()=>o[0]||(o[0]=[I("Dendro")])),_:1}),u(Ve),(V(!0),C(_,null,$(d.value,n=>(V(),C(_,{key:n.to},[n.show?(V(),P(L,{key:0,to:n.to,"prepend-icon":n.icon},{default:h(()=>[I(H(n.text)+" ",1),n.to==="/cart"?(V(),P(Me,{key:0,content:U(a).cart,floating:"",color:"red"},null,8,["content"])):N("",!0)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),U(a).isLoggedIn?(V(),P(L,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:y},{default:h(()=>[I(H(g.$t("nav.logout")),1)]),_:1})):N("",!0),u(Pe,null,{activator:h(({props:n})=>[u(L,we(xe(n)),{default:h(()=>[u(F,{icon:"mdi-translate"})]),_:2},1040)]),default:h(()=>[u(_e,null,{default:h(()=>[(V(),C(_,null,$(i,n=>u(Le,{key:n.value,onClick:S=>g.$i18n.locale=n.value},{default:h(()=>[I(H(n.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),u(Ie,null,{default:h(()=>[u(v)]),_:1})],64)}}};export{Xe as default};
