import{p as A,G as Y,s as w,c as m,a0 as X,w as C,o as j,b as q,j as G,q as D,E as O,u as J,H as Z,y as P,J as F,L as r,M as R,d as K,a1 as Q,f as ee,a2 as te,k as ae,l as oe,n as le,a3 as ne,x as se,B as re,a4 as ue,a5 as ie,a6 as ce,a7 as de,a8 as ve,a9 as me,aa as ge,ab as fe,ac as W,R as he,S as be,ad as ye,ae as Se,U as Ve,W as p,X as h,O as _,Y as k,af as T,ag as L,ah as ke,_ as $,Z as U,$ as I,ai as H,aj as N,ak as we,al as Be,am as xe}from"./index-CESgWLFd.js";import{m as Ce,V as z}from"./VToolbar-62hR5u4i.js";import{u as pe,V as _e,a as Te}from"./VList-BYOIWQhm.js";import{V as Le}from"./VMain-DMiYKz0R.js";import{V as Pe}from"./VContainer-CWXFmm6l.js";import{V as Ie}from"./VMenu-BhkwhUgz.js";import"./VDivider-DhXl82fb.js";const He=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ne(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:l}=u;let b=0,c=0;const t=Y(null),d=w(0),i=w(0),y=w(0),g=w(!1),a=w(!1),v=m(()=>Number(e.scrollThreshold)),n=m(()=>X((v.value-d.value)/v.value||0)),S=()=>{const s=t.value;if(!s||l&&!l.value)return;b=d.value,d.value="window"in s?s.pageYOffset:s.scrollTop;const f=s instanceof Window?document.documentElement.scrollHeight:s.scrollHeight;if(c!==f){c=f;return}a.value=d.value<b,y.value=Math.abs(d.value-v.value)};return C(a,()=>{i.value=i.value||d.value}),C(g,()=>{i.value=0}),j(()=>{C(()=>e.scrollTarget,s=>{var V;const f=s?document.querySelector(s):window;f&&f!==t.value&&((V=t.value)==null||V.removeEventListener("scroll",S),t.value=f,t.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),q(()=>{var s;(s=t.value)==null||s.removeEventListener("scroll",S)}),l&&C(l,S,{immediate:!0}),{scrollThreshold:v,currentScroll:d,currentThreshold:y,isScrollActive:g,scrollRatio:n,isScrollingUp:a,savedScroll:i}}const Re=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Ce(),...G(),...He(),height:{type:[Number,String],default:64}},"VAppBar"),Ae=D()({name:"VAppBar",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:l}=u;const b=Y(),c=O(e,"modelValue"),t=m(()=>{var B;const o=new Set(((B=e.scrollBehavior)==null?void 0:B.split(" "))??[]);return{hide:o.has("hide"),fullyHide:o.has("fully-hide"),inverted:o.has("inverted"),collapse:o.has("collapse"),elevate:o.has("elevate"),fadeImage:o.has("fade-image")}}),d=m(()=>{const o=t.value;return o.hide||o.fullyHide||o.inverted||o.collapse||o.elevate||o.fadeImage||!c.value}),{currentScroll:i,scrollThreshold:y,isScrollingUp:g,scrollRatio:a}=Ne(e,{canScroll:d}),v=m(()=>t.value.hide||t.value.fullyHide),n=m(()=>e.collapse||t.value.collapse&&(t.value.inverted?a.value>0:a.value===0)),S=m(()=>e.flat||t.value.fullyHide&&!c.value||t.value.elevate&&(t.value.inverted?i.value>0:i.value===0)),s=m(()=>t.value.fadeImage?t.value.inverted?1-a.value:a.value:void 0),f=m(()=>{var E,M;if(t.value.hide&&t.value.inverted)return 0;const o=((E=b.value)==null?void 0:E.contentHeight)??0,B=((M=b.value)==null?void 0:M.extensionHeight)??0;return v.value?i.value<y.value||t.value.fullyHide?o+B:o:o+B});J(m(()=>!!e.scrollBehavior),()=>{K(()=>{v.value?t.value.inverted?c.value=i.value>y.value:c.value=g.value||i.value<y.value:c.value=!0})});const{ssrBootStyles:V}=pe(),{layoutItemStyles:x}=Z({id:e.name,order:m(()=>parseInt(e.order,10)),position:P(e,"location"),layoutSize:f,elementSize:w(void 0),active:c,absolute:P(e,"absolute")});return F(()=>{const o=z.filterProps(e);return r(z,R({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...x.value,"--v-toolbar-image-opacity":s.value,height:void 0,...V.value},e.style]},o,{collapse:n.value,flat:S.value}),l)}),{}}}),Ee=A({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Q,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ee(),...te({location:"top end"}),...ae(),...oe(),...le(),...ne({transition:"scale-rotate-transition"})},"VBadge"),Me=D()({name:"VBadge",inheritAttrs:!1,props:Ee(),setup(e,u){const{backgroundColorClasses:l,backgroundColorStyles:b}=se(P(e,"color")),{roundedClasses:c}=re(e),{t}=ue(),{textColorClasses:d,textColorStyles:i}=ie(P(e,"textColor")),{themeClasses:y}=ce(),{locationStyles:g}=de(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?+(e.offsetY??0):["left","right"].includes(a)?+(e.offsetX??0):0));return F(()=>{const a=Number(e.content),v=!e.max||isNaN(a)?e.content:a<=+e.max?a:`${e.max}+`,[n,S]=ve(u.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return r(e.tag,R({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},S,{style:e.style}),{default:()=>{var s,f;return[r("div",{class:"v-badge__wrapper"},[(f=(s=u.slots).default)==null?void 0:f.call(s),r(me,{transition:e.transition},{default:()=>{var V,x;return[ge(r("span",R({class:["v-badge__badge",y.value,l.value,c.value,d.value],style:[b.value,i.value,e.inline?{}:g.value],"aria-atomic":"true","aria-label":t(e.label,a),"aria-live":"polite",role:"status"},n),[e.dot?void 0:u.slots.badge?(x=(V=u.slots).badge)==null?void 0:x.call(V):e.icon?r(W,{icon:e.icon},null):v]),[[fe,e.modelValue]])]}})])]}})}),{}}}),Xe={__name:"default",setup(e){const{t:u}=he(),l=be(),{apiAuth:b}=xe(),c=ye(),t=Se(),d=m(()=>[{to:"/register",text:u("nav.register"),icon:"mdi-account-plus",show:!l.isLoggedIn},{to:"/login",text:u("nav.login"),icon:"mdi-account-arrow-left",show:!l.isLoggedIn},{to:"/cart",text:u("nav.cart"),icon:"mdi-cart",show:l.isLoggedIn},{to:"/orders",text:u("nav.orders"),icon:"mdi-format-list-bulleted",show:l.isLoggedIn},{to:"/admin",text:u("nav.admin"),icon:"mdi-cog",show:l.isLoggedIn&&l.isAdmin}]),i=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],y=async()=>{try{await b.delete("/user/logout")}catch(g){console.log(g)}l.logout(),c({text:u("logout.success"),snackbarProps:{color:"green"}}),t.push("/")};return(g,a)=>{const v=Ve("router-view");return k(),p(_,null,[r(Ae,{style:{"background-color":"var(--v-theme-myGreenColor)",color:"white"}},{default:h(()=>[r(Pe,{class:"d-flex align-center"},{default:h(()=>[r(T,{to:"/",active:!1},{default:h(()=>a[0]||(a[0]=[L("Dendro")])),_:1}),r(ke),(k(!0),p(_,null,$(d.value,n=>(k(),p(_,{key:n.to},[n.show?(k(),I(T,{key:0,to:n.to,"prepend-icon":n.icon},{default:h(()=>[L(H(n.text)+" ",1),n.to==="/cart"?(k(),I(Me,{key:0,content:U(l).cart,floating:"",color:"red"},null,8,["content"])):N("",!0)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),U(l).isLoggedIn?(k(),I(T,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:y},{default:h(()=>[L(H(g.$t("nav.logout")),1)]),_:1})):N("",!0),r(Ie,null,{activator:h(({props:n})=>[r(T,we(Be(n)),{default:h(()=>[r(W,{icon:"mdi-translate"})]),_:2},1040)]),default:h(()=>[r(_e,null,{default:h(()=>[(k(),p(_,null,$(i,n=>r(Te,{key:n.value,onClick:S=>g.$i18n.locale=n.value},{default:h(()=>[L(H(n.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),r(Le,null,{default:h(()=>[r(v)]),_:1})],64)}}};export{Xe as default};
